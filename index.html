
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hazel Street Rental Manager</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js">
function checkLeaseExpirations() {
  const today = new Date().toISOString().split('T')[0];
  const rows = document.querySelectorAll('#tenantTable tbody tr');
  rows.forEach(row => {
    const endDateInput = row.querySelectorAll('input[type="date"]')[1];
    if (endDateInput && endDateInput.value && endDateInput.value < today) {
      row.style.backgroundColor = "#ffe5e5"; // Light red background
      if (!row.dataset.alerted) {
        alert(`Lease expired for: ${row.children[0].textContent}`);
        row.dataset.alerted = "true";
      }
    }
  });
}
setInterval(checkLeaseExpirations, 10000);


function checkOverdueMaintenance() {
  const today = new Date().toISOString().split('T')[0];
  const rows = document.querySelectorAll('#maintenanceTable tbody tr');
  rows.forEach(row => {
    const status = row.querySelector('select')?.value;
    const targetDate = row.querySelectorAll('input[type="date"]')[1];
    if (status !== 'Resolved' && targetDate?.value && targetDate.value < today) {
      row.style.backgroundColor = "#fff3cd"; // light yellow for overdue
      if (!row.dataset.reminded) {
        alert(`‚ö†Ô∏è Overdue maintenance for unit: ${row.children[0].textContent}`);
        row.dataset.reminded = "true";
      }
    }
  });
}
setInterval(checkOverdueMaintenance, 10000);

</script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f8f9fc;
      color: #5a5c69;
      display: flex;
    }
    .sidebar {
      width: 240px;
      background: #4e73df;
      color: white;
      height: 100vh;
      position: fixed;
      display: flex;
      flex-direction: column;
      padding: 20px 10px;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
    }
    .sidebar h2 {
      text-align: center;
      margin-bottom: 30px;
    }
    .sidebar button {
      background: none;
      border: none;
      color: #e2e6ea;
      padding: 10px;
      width: 100%;
      text-align: left;
      cursor: pointer;
    }
    .sidebar button:hover, .sidebar button.active {
      background: #2e59d9;
      color: white;
    }
    .main {
      margin-left: 260px;
      padding: 30px;
      flex: 1;
    }
    .section {
      display: none;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .section.active {
      display: block;
    }
    h2 {
      margin-top: 0;
      color: #4e73df;
      border-bottom: 2px solid #4e73df;
      padding-bottom: 5px;
    }
    .btn {
      background: #4e73df;
      color: white;
      border: none;
      padding: 8px 12px;
      cursor: pointer;
      border-radius: 4px;
      font-size: 14px;
    }
    table {
      width: 100%;
      margin-top: 15px;
      border-collapse: collapse;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ccc;
    }
    th {
      background: #f1f3f9;
    }
  </style>
</head>
<body>

<div class="sidebar">
  <h2>Hazel Street</h2>
  <button class="tab-btn active" onclick="showSection('tenantSection', this)">üë• Tenants</button>
  <button class="tab-btn" onclick="showSection('rentSection', this)">üè† Rent</button>
  <button class="tab-btn" onclick="showSection('maintenanceSection', this)">üõ† Maintenance</button>
  <button class="tab-btn" onclick="showSection('reportSection', this)">üìä Reports</button>
</div>

<div class="main">
  <div class="section active" id="tenantSection">
    <h2>Tenants</h2>
    <button class="btn" onclick="addTenantRow()">Add Tenant</button>
    <table id="tenantTable">
      <thead>
        <tr><th>Name</th><th>Unit</th><th>Email</th><th>Lease Start</th><th>Lease End</th><th>Actions</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="section" id="rentSection">
    <h2>Rent</h2>
    <button class="btn" onclick="addRentRow()">Add Rent</button>
    <table id="rentTable">
      <thead>
        <tr><th>Tenant</th><th>Unit</th><th>Amount</th><th>Due Date</th><th>Status</th><th>Reminder</th><th>Actions</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="section" id="maintenanceSection">
    <h2>Maintenance</h2>
    <button class="btn" onclick="addMaintenanceRow()">Add Maintenance</button>
    <table id="maintenanceTable">
      <thead>
        <tr><th>Unit</th><th>Issue</th><th>Status</th><th>Date Reported</th><th>Target Completion</th><th>Actions</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="section" id="reportSection">
    <h2>Reports</h2>
    <div style="display:flex; gap:20px; flex-wrap:wrap; margin-bottom:20px;">
      <div style="flex:1; padding:15px; background:#f8f9fc; border-left:4px solid #4e73df; border-radius:5px;">
        <strong>Total Tenants:</strong> <span id="reportTotalTenants">0</span>
      </div>
      <div style="flex:1; padding:15px; background:#f8f9fc; border-left:4px solid #1cc88a; border-radius:5px;">
        <strong>Total Rent Records:</strong> <span id="reportTotalRent">0</span>
      </div>
      <div style="flex:1; padding:15px; background:#f8f9fc; border-left:4px solid #e74a3b; border-radius:5px;">
        <strong>Overdue Maintenance:</strong> <span id="reportOverdueMaint">0</span>
      </div>
    </div>
    <canvas id="rentChart" width="400" height="200"></canvas>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js">
function checkLeaseExpirations() {
  const today = new Date().toISOString().split('T')[0];
  const rows = document.querySelectorAll('#tenantTable tbody tr');
  rows.forEach(row => {
    const endDateInput = row.querySelectorAll('input[type="date"]')[1];
    if (endDateInput && endDateInput.value && endDateInput.value < today) {
      row.style.backgroundColor = "#ffe5e5"; // Light red background
      if (!row.dataset.alerted) {
        alert(`Lease expired for: ${row.children[0].textContent}`);
        row.dataset.alerted = "true";
      }
    }
  });
}
setInterval(checkLeaseExpirations, 10000);


function checkOverdueMaintenance() {
  const today = new Date().toISOString().split('T')[0];
  const rows = document.querySelectorAll('#maintenanceTable tbody tr');
  rows.forEach(row => {
    const status = row.querySelector('select')?.value;
    const targetDate = row.querySelectorAll('input[type="date"]')[1];
    if (status !== 'Resolved' && targetDate?.value && targetDate.value < today) {
      row.style.backgroundColor = "#fff3cd"; // light yellow for overdue
      if (!row.dataset.reminded) {
        alert(`‚ö†Ô∏è Overdue maintenance for unit: ${row.children[0].textContent}`);
        row.dataset.reminded = "true";
      }
    }
  });
}
setInterval(checkOverdueMaintenance, 10000);

</script>
<script>
function showSection(id, btn) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  if (id === 'reportSection') generateReport();
}

function addTenantRow() {
  const row = document.createElement('tr');
  row.innerHTML = '<td contenteditable>Tenant Name</td><td contenteditable>Unit</td><td contenteditable>email@example.com</td><td><input type="date"></td><td><input type="date"></td><td><button class="btn" onclick="this.closest(\'tr\').remove()">Delete</button></td>';
  document.querySelector('#tenantTable tbody').appendChild(row);
}

function addRentRow() {
  const row = document.createElement('tr');
  row.innerHTML = '<td contenteditable>Name</td><td contenteditable>Unit</td><td contenteditable>1000</td><td><input type="date"></td>' +
                  '<td><select><option>Pending</option><option>Paid</option><option>Overdue</option></select></td>' +
                  '<td><button class="btn" onclick="alert(\'Reminder sent\')">Send</button></td>' +
                  '<td><button class="btn" onclick="this.closest(\'tr\').remove()">Delete</button></td>';
  document.querySelector('#rentTable tbody').appendChild(row);
}

function addMaintenanceRow() {
  const row = document.createElement('tr');
  row.innerHTML = '<td contenteditable>Unit</td><td contenteditable>Issue</td>' + '<td><select><option>Open</option><option>In Progress</option><option>Resolved</option></select></td>' + '<td><input type="date"></td>' + '<td><input type="date"></td>' + 
                  '<td><select><option>Open</option><option>In Progress</option><option>Resolved</option></select></td>' +
                  '<td><input type="date"></td>' +
                  '<td><button class="btn" onclick="this.closest(\'tr\').remove()">Delete</button></td>';
  document.querySelector('#maintenanceTable tbody').appendChild(row);
}

function generateReport() {
  document.getElementById('reportTotalTenants').textContent = document.querySelectorAll('#tenantTable tbody tr').length;
  document.getElementById('reportTotalRent').textContent = document.querySelectorAll('#rentTable tbody tr').length;
  const today = new Date().toISOString().split('T')[0];
  let overdueCount = 0;
  document.querySelectorAll('#maintenanceTable tbody tr').forEach(row => {
    const status = row.querySelector('select')?.value;
    const target = row.querySelectorAll('input[type="date"]')[1];
    if (status !== 'Resolved' && target && target.value < today) {
      overdueCount++;
    }
  });
  document.getElementById('reportOverdueMaint').textContent = overdueCount;
  const statuses = ['Pending', 'Paid', 'Overdue'];
  const counts = [0, 0, 0];
  document.querySelectorAll('#rentTable tbody tr').forEach(row => {
    const status = row.querySelector('select')?.value;
    const idx = statuses.indexOf(status);
    if (idx > -1) counts[idx]++;
  });

  const ctx = document.getElementById('rentChart').getContext('2d');
  if (window.rentChart) window.rentChart.destroy();
  window.rentChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: statuses,
      datasets: [{
        label: 'Rent Status',
        data: counts,
        backgroundColor: ['#f6c23e', '#1cc88a', '#e74a3b']
      }]
    }
  });
}

function checkLeaseExpirations() {
  const today = new Date().toISOString().split('T')[0];
  const rows = document.querySelectorAll('#tenantTable tbody tr');
  rows.forEach(row => {
    const endDateInput = row.querySelectorAll('input[type="date"]')[1];
    if (endDateInput && endDateInput.value && endDateInput.value < today) {
      row.style.backgroundColor = "#ffe5e5"; // Light red background
      if (!row.dataset.alerted) {
        alert(`Lease expired for: ${row.children[0].textContent}`);
        row.dataset.alerted = "true";
      }
    }
  });
}
setInterval(checkLeaseExpirations, 10000);


function checkOverdueMaintenance() {
  const today = new Date().toISOString().split('T')[0];
  const rows = document.querySelectorAll('#maintenanceTable tbody tr');
  rows.forEach(row => {
    const status = row.querySelector('select')?.value;
    const targetDate = row.querySelectorAll('input[type="date"]')[1];
    if (status !== 'Resolved' && targetDate?.value && targetDate.value < today) {
      row.style.backgroundColor = "#fff3cd"; // light yellow for overdue
      if (!row.dataset.reminded) {
        alert(`‚ö†Ô∏è Overdue maintenance for unit: ${row.children[0].textContent}`);
        row.dataset.reminded = "true";
      }
    }
  });
}
setInterval(checkOverdueMaintenance, 10000);

</script>

</body>
</html>
